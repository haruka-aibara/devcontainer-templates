{
  "name": "Development Environment",
  "build": {
    "dockerfile": "Dockerfile"
  },
  // Configure post-create commands
  "postCreateCommand": "bash ./.devcontainer/post-create.sh",
  // Mount AWS credentials and Git configuration from host machine in read-only mode for secure access within container
  "mounts": [
    "source=${localEnv:HOME}/.aws,target=/home/vscode/.aws,type=bind,readonly",
    "source=${localEnv:HOME}/.gitconfig,target=/home/vscode/.gitconfig,type=bind,readonly"
  ],
  "customizations": {
    "vscode": {
      // 拡張機能リスト(拡張機能IDを指定)
      "extensions": [
        // HashiCorp Terraform
        "hashicorp.terraform",
        // Container Tools
        // "ms-azuretools.vscode-containers",
        // Docker DX (Developer Experience)
        "docker.docker",
        // Docker
        "ms-azuretools.vscode-docker",
        // Ansible
        "redhat.ansible",
        // AWS Toolkit
        "amazonwebservices.aws-toolkit-vscode",
        // Markdown All in One
        "yzhang.markdown-all-in-one",
        // Markdown Preview Enhanced
        "shd101wyy.markdown-preview-enhanced",
        // Markdown Preview Mermaid Support
        "bierner.markdown-mermaid",
        // autoDocstring - Python Docstring Generator
        "njpwerner.autodocstring",
        // Mypy Type Checker
        "ms-python.mypy-type-checker",
        // Pylance
        "ms-python.vscode-pylance",
        // Pylint
        "ms-python.pylint",
        // Python
        "ms-python.python",
        // Python Debugger
        "ms-python.debugpy",
        // Rainbow CSV
        "mechatroner.rainbow-csv",
        // Ruff
        "charliermarsh.ruff",
        // YAML
        "redhat.vscode-yaml"
      ],
      // 本体設定
      "settings": {
        "files.insertFinalNewline": true,
        "git.autofetch": true,
        "git.enableSmartCommit": true,
        "git.confirmSync": false,
        "markdown.copyFiles.destination": {
          "**/*.md": "assets/${documentBaseName}/"
        },
        "[terraform]": {
          "editor.defaultFormatter": "hashicorp.terraform",
          "editor.formatOnSave": true,
          "editor.formatOnSaveMode": "file"
        },
        "[terraform-vars]": {
          "editor.defaultFormatter": "hashicorp.terraform",
          "editor.formatOnSave": true,
          "editor.formatOnSaveMode": "file"
        },
        "[python]": {
          "editor.codeActionsOnSave": {
            "source.fixAll": "explicit",
            "source.organizeImports": "explicit"
          },
          "editor.defaultFormatter": "charliermarsh.ruff"
        },
        "ruff.lineLength": 120,
        "ruff.lint.ignore": [
          "F401"
        ],
        "ruff.lint.preview": true,
        "ruff.lint.select": [
          "C",
          "E",
          "F",
          "W",
          "I"
        ],
        "ruff.nativeServer": "on",
        "aws.suppressPrompts": {
          "fileViewerEdit": true
        },
        "explorer.confirmDragAndDrop": false,
        "python.analysis.typeCheckingMode": "strict",
        "redhat.telemetry.enabled": false
      }
    }
  },
  // "features": {
  //   "docker-from-docker": {
  //     "version": "latest",
  //     "moby": true,
  //     "dockerDashComposeVersion": "v2"
  //   }
  // },
  "features": {
    "ghcr.io/devcontainers/features/docker-in-docker:2": {}
  },
  // Additional options
  "remoteUser": "vscode"
}
